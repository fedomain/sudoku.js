<!DOCTYPE html>
<hrml>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>Fedtest</title>
<style>
html, body {
  padding: 0;
  margin: 0;
  font: 20px arial, sans-serif;
}

div#wrapper {
  min-width: 70%;
  min-height: 70%;
}

div#game-board-wrapper {
  width: 490px;
  height: 490px;
  float: left;
  margin: 10px;
}

div#game-pad-wrapper {
  width: 300px;
  height: 300px;
  float: left;
  margin: 10px;
}

table#game-board {
  margin: auto;
  border-collapse: collapse;
  border: 2px solid black;
}

table#game-board td {
  width: 30px;
  height: 30px;
  padding: 10px;
  font-size: 30px;
  text-align: center;
}

table#game-board td.normal {
  border-right: 1px solid black;
  border-bottom: 1px solid black;
}

table#game-pad {
  margin: auto;
  border-collapse: collapse;
}

table#game-pad td {
  width: 100px;
  height: 100px;
  font-size: 40px;
  text-align: center;
  color: #005fee;
  background-color: #eeeeee;
  border: 5px solid #ffffff;
  cursor: pointer;
}

table#game-pad td:hover {background-color: #a3adcf};

table#game-board td.heavy-border-right {border-right: 2px solid black;}
table#game-board td.heavy-border-bottom {border-bottom: 2px solid black;}
table#game-board td.alt-background {background-color: #eeeeee;}

button {
  display: block;
  background-color: #3d49f8;
  border-radius: 10px;
  border: 4px double #cccccc;
  color: #eeeeee;
  text-align: center;
  font-size: 28px;
  padding: 20px;
  width: 300px;
  transition: all 0.5s;
  cursor: pointer;
  margin: 0 0 20px 0;
}

button:hover {
  background-color: #636dfd;
}
</style>
<script>
var getGrid = function() {
  var grid = [];

  grid[0] = [0, 0, 0, 0, 0, 0, 0, 0, 0];
  grid[1] = [0, 0, 0, 0, 0, 0, 0, 0, 0];
  grid[2] = [0, 0, 0, 0, 0, 0, 0, 0, 0];
  grid[3] = [0, 0, 0, 0, 0, 0, 0, 0, 0];
  grid[4] = [0, 0, 0, 0, 0, 0, 0, 0, 0];
  grid[5] = [0, 0, 0, 0, 0, 0, 0, 0, 0];
  grid[6] = [0, 0, 0, 0, 0, 0, 0, 0, 0];
  grid[7] = [0, 0, 0, 0, 0, 0, 0, 0, 0];
  grid[8] = [0, 0, 0, 0, 0, 0, 0, 0, 0];

  return grid;
}

function getRndInteger(minimum, maximum) {
  var max = maximum + 1;
  var result = Math.floor(Math.random() * (max - minimum)) + minimum;
  return result;
}

function getNumberOfRandoms(number, min, max) {
  var random = 0;
  var result = [];

  while (result.length < number) {
    random = getRndInteger(min, max);

    if (!result.includes(random)) {
      result.push(random);
    }
  }

  return result;
}

function setFirstNine(grid) {
  var count = 0;
  var firstNine = getNumberOfRandoms(9,1,9);

  for (var i=0; i<3; i++) {
    for (var j=0; j<3; j++) {
      grid[i][j] = firstNine[count];
      count++;
    }
  }
}

function setOpenPositions(grid, game) {
  var count = 1;
  var openPositions = getNumberOfRandoms(30,1,81);

  for (var i=0; i<9; i++) {
    for (var j=0; j<9; j++) {
      if (openPositions.includes(count))
        game[i][j] = grid[i][j];
      count++;
    }
  }
}

function checkGrid(grid) {
  for (var i=0; i<9; i++) {
    for (var j=0; j<9; j++) {
      if (grid[i][j] == 0) {
        return false;
      }
    }
  }

  return true;
}

function solveGrid(grid) {
  var row = 0;
  var col = 0;
  var square = [];
  var total = 0;

  // Find next empty cell
  for (var i=0; i<81; i++) {
    row = Math.floor(i/9);
    col = i % 9;
    if (grid[row][col] == 0) {
      for (var j=1; j<10; j++) {
        // Check that this value has not already been used on this row
        if (!grid[row].includes(j)) {
          // Check that this value has not already been used on this column
          if (! [grid[0][col],grid[1][col],grid[2][col],grid[3][col],grid[4][col],grid[5][col],grid[6][col],grid[7][col],grid[8][col]].includes(j)) {
            // Identify which of the 9 squares we are working on
            square = [];
            if (row < 3) {
              if (col < 3) {
                square[0] = grid[0][0];
                square[1] = grid[1][1];
                square[2] = grid[2][2];
              } else if (col < 6) {
                square[0] = grid[0][3];
                square[1] = grid[1][4];
                square[2] = grid[2][5];
              } else {
                square[0] = grid[0][6];
                square[1] = grid[1][7];
                square[2] = grid[2][8];
              }
            } else if (row < 6) {
              if (col < 3) {
                square[0] = grid[3][0];
                square[1] = grid[4][1];
                square[2] = grid[5][2];
              } else if (col < 6) {
                square[0] = grid[3][3];
                square[1] = grid[4][4];
                square[2] = grid[5][5];
              } else {
                square[0] = grid[3][6];
                square[1] = grid[4][7];
                square[2] = grid[5][8];
              }
            } else {
              if (col < 3) {
                square[0] = grid[6][0];
                square[1] = grid[7][1];
                square[2] = grid[8][2];
              } else if (col < 6) {
                square[0] = grid[6][3];
                square[1] = grid[7][4];
                square[2] = grid[8][5];
              } else {
                square[0] = grid[6][6];
                square[1] = grid[7][7];
                square[2] = grid[8][8];
              }
            }
            
            // Check that this value has not already been used on this 3x3 square
            if (![square[0],square[1],square[2]].includes(j)) {
              grid[row][col] = j;

              if (checkGrid(grid)) {
                return true;
              } else {
                if (solveGrid(grid)) {
                  return true;
                }
              }
            }
          }
        }
      }
      break;
    }
  }

  grid[row][col] = 0;
}

function setupGame(grid) {
  for (var i=0; i<9; i++) {
    for (var j=0; j<9; j++) {
      if (grid[i][j] != 0) {
        document.getElementById("r" + i + "c" + j).innerHTML = grid[i][j];
      }
    }
  }
}

function resetGrid() {
  for (var i=0; i<9; i++) {
    for (var j=0; j<9; j++) {
      document.getElementById("r" + i + "c" + j).innerHTML = "";
    }
  }
}


// Start 
var gameBoard = getGrid();
var answerBoard = getGrid();

function startGame() {
  gameBoard = getGrid();
  answerBoard = getGrid();

  resetGrid();
  setFirstNine(answerBoard);
  solveGrid(answerBoard);
  setOpenPositions(answerBoard, gameBoard);
  setupGame(gameBoard);
}
</script>
</head>

<body>
<div id="wrapper">
  <div id="game-board-wrapper">
    <table id="game-board">
      <tr id="row1">
        <td id="r0c0" class="normal alt-background"></td>
        <td id="r0c1" class="normal alt-background"></td>
        <td id="r0c2" class="normal alt-background heavy-border-right"></td>
        <td id="r0c3" class="normal"></td>
        <td id="r0c4" class="normal"></td>
        <td id="r0c5" class="normal heavy-border-right"></td>
        <td id="r0c6" class="normal alt-background"></td>
        <td id="r0c7" class="normal alt-background"></td>
        <td id="r0c8" class="normal alt-background"></td>
      </tr>
      <tr id="row2">
        <td id="r1c0" class="normal alt-background"></td>
        <td id="r1c1" class="normal alt-background"></td>
        <td id="r1c2" class="normal alt-background heavy-border-right"></td>
        <td id="r1c3" class="normal"></td>
        <td id="r1c4" class="normal"></td>
        <td id="r1c5" class="normal heavy-border-right"></td>
        <td id="r1c6" class="normal alt-background"></td>
        <td id="r1c7" class="normal alt-background"></td>
        <td id="r1c8" class="normal alt-background"></td>
      </tr>
      <tr id="row3">
        <td id="r2c0" class="normal alt-background heavy-border-bottom"></td>
        <td id="r2c1" class="normal alt-background heavy-border-bottom"></td>
        <td id="r2c2" class="normal alt-background heavy-border-bottom heavy-border-right"></td>
        <td id="r2c3" class="normal heavy-border-bottom"></td>
        <td id="r2c4" class="normal heavy-border-bottom"></td>
        <td id="r2c5" class="normal heavy-border-bottom heavy-border-right"></td>
        <td id="r2c6" class="normal alt-background heavy-border-bottom"></td>
        <td id="r2c7" class="normal alt-background heavy-border-bottom"></td>
        <td id="r2c8" class="normal alt-background heavy-border-bottom"></td>
      </tr>
      <tr id="row4">
        <td id="r3c0" class="normal"></td>
        <td id="r3c1" class="normal"></td>
        <td id="r3c2" class="normal heavy-border-right"></td>
        <td id="r3c3" class="normal alt-background"></td>
        <td id="r3c4" class="normal alt-background"></td>
        <td id="r3c5" class="normal alt-background heavy-border-right"></td>
        <td id="r3c6" class="normal"></td>
        <td id="r3c7" class="normal"></td>
        <td id="r3c8" class="normal"></td>
      </tr>
      <tr id="row5">
        <td id="r4c0" class="normal"></td>
        <td id="r4c1" class="normal"></td>
        <td id="r4c2" class="normal heavy-border-right"></td>
        <td id="r4c3" class="normal alt-background"></td>
        <td id="r4c4" class="normal alt-background"></td>
        <td id="r4c5" class="normal alt-background heavy-border-right"></td>
        <td id="r4c6" class="normal"></td>
        <td id="r4c7" class="normal"></td>
        <td id="r4c8" class="normal"></td>
      </tr>
      <tr id="row6">
        <td id="r5c0" class="normal heavy-border-bottom"></td>
        <td id="r5c1" class="normal heavy-border-bottom"></td>
        <td id="r5c2" class="normal heavy-border-bottom heavy-border-right"></td>
        <td id="r5c3" class="normal alt-background heavy-border-bottom"></td>
        <td id="r5c4" class="normal alt-background heavy-border-bottom"></td>
        <td id="r5c5" class="normal alt-background heavy-border-bottom heavy-border-right"></td>
        <td id="r5c6" class="normal heavy-border-bottom"></td>
        <td id="r5c7" class="normal heavy-border-bottom"></td>
        <td id="r5c8" class="normal heavy-border-bottom"></td>
      </tr>
      <tr id="row7">
        <td id="r6c0" class="normal alt-background"></td>
        <td id="r6c1" class="normal alt-background"></td>
        <td id="r6c2" class="normal alt-background heavy-border-right"></td>
        <td id="r6c3" class="normal"></td>
        <td id="r6c4" class="normal"></td>
        <td id="r6c5" class="normal heavy-border-right"></td>
        <td id="r6c6" class="normal alt-background"></td>
        <td id="r6c7" class="normal alt-background"></td>
        <td id="r6c8" class="normal alt-background"></td>
      </tr>
      <tr id="row8">
        <td id="r7c0" class="normal alt-background"></td>
        <td id="r7c1" class="normal alt-background"></td>
        <td id="r7c2" class="normal alt-background heavy-border-right"></td>
        <td id="r7c3" class="normal"></td>
        <td id="r7c4" class="normal"></td>
        <td id="r7c5" class="normal heavy-border-right"></td>
        <td id="r7c6" class="normal alt-background"></td>
        <td id="r7c7" class="normal alt-background"></td>
        <td id="r7c8" class="normal alt-background"></td>
      </tr>
      <tr id="row9">
        <td id="r8c0" class="normal alt-background"></td>
        <td id="r8c1" class="normal alt-background"></td>
        <td id="r8c2" class="normal alt-background heavy-border-right"></td>
        <td id="r8c3" class="normal"></td>
        <td id="r8c4" class="normal"></td>
        <td id="r8c5" class="normal heavy-border-right"></td>
        <td id="r8c6" class="normal alt-background"></td>
        <td id="r8c7" class="normal alt-background"></td>
        <td id="r8c8" class="normal alt-background"></td>
      </tr>
    </table>
  </div>
  <div id="game-pad-wrapper">
    <button onclick="startGame();" type="button">New Game</button>
    <table id="game-pad">
      <tr>
        <td>1</td>
        <td>2</td>
        <td>3</td>
      </tr>
      <tr>
        <td>4</td>
        <td>5</td>
        <td>6</td>
      </tr>
      <tr>
        <td>7</td>
        <td>8</td>
        <td>9</td>
      </tr>
    </table>
  </div>
</div>
</body>
</hrml>